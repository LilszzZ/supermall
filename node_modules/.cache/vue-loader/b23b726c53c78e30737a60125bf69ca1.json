{"remainingRequest":"D:\\vue项目\\supermall-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue项目\\supermall-master\\src\\views\\home\\Home.vue?vue&type=style&index=0&id=3dd2e005&scoped=true&lang=css&","dependencies":[{"path":"D:\\vue项目\\supermall-master\\src\\views\\home\\Home.vue","mtime":1620893710000},{"path":"D:\\vue项目\\supermall-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":1655460943778},{"path":"D:\\vue项目\\supermall-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1655460948934},{"path":"D:\\vue项目\\supermall-master\\node_modules\\postcss-loader\\src\\index.js","mtime":1655460944907},{"path":"D:\\vue项目\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655460943176},{"path":"D:\\vue项目\\supermall-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1655460947237}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2hvbWUgewogIC8qcGFkZGluZy10b3A6IDQ0cHg7Ki8KICBoZWlnaHQ6IDEwMHZoOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLmhvbWUtbmF2IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci10aW50KTsKICBjb2xvcjogI2ZmZjsKICAvKiovCiAgLypwb3NpdGlvbjogZml4ZWQ7Ki8KICAvKmxlZnQ6IDA7Ki8KICAvKnJpZ2h0OiAwOyovCiAgLyp0b3A6IDA7Ki8KICB6LWluZGV4OiAxOwp9Ci8qLmNvbnRlbnQgeyovCi8qICBwb3NpdGlvbjogYWJzb2x1dGU7Ki8KLyogIG92ZXJmbG93OiBoaWRkZW47Ki8KLyogIHRvcDogNDRweDsqLwovKiAgYm90dG9tOiA0OXB4OyovCi8qICBsZWZ0OiAwOyovCi8qICByaWdodDogMDsqLwovKn0qLwouY29udGVudCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIG92ZXJmbG93OiBoaWRkZW47CiAgdG9wOiA0NHB4OwogIGJvdHRvbTogNDlweDsKICBsZWZ0OiAwOwogIHJpZ2h0OiAwOwp9Ci50YWItY29udHJvbCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHotaW5kZXg6IDk7Cn0KLmNvbnRlbnQgewogIGhlaWdodDogY2FsYygxMDAlIC0gNDRweCAtIDQ5cHgpOwogIG92ZXJmbG93OiBoaWRkZW47CiAgLyptYXJnaW4tdG9wOiA0NHB4IWltcG9ydGFudDsqLwp9Ci8qLmNvbnRlbnQgeyovCi8qICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDkzcHgpOyovCi8qICBvdmVyZmxvdzogaGlkZGVuOyovCi8qICBtYXJnaW4tdG9wOiA0NHB4IWltcG9ydGFudDsqLwovKn0qLwo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div id=\"home\">\n    <nav-bar class=\"home-nav\"><div slot=\"center\">购物街</div></nav-bar>\n    <tab-control :titles=\"['流行', '新款', '精选']\"\n                 ref=\"tabcontrol1\"\n                 @tabClick=\"tabClick\"\n                  class=\"tab-control\"\n                  v-show=\"isTabFixed\"/>\n    <scroll class=\"content\"\n            ref=\"scroll\"\n            :probe-type=\"2\"\n            :pull-up-load=\"true\"\n            @scroll=\"contentScroll\"\n            @pullingUp=\"loadMore\">\n      <home-swiper :banners=\"banners\" @swiperImageLoad=\"swiperImageLoad\"/>\n      <recommend-view :recommends=\"recommends\"/>\n      <feature-view/>\n      <tab-control :titles=\"['流行', '新款', '精选']\"\n                   ref=\"tabcontrol2\"\n                   @tabClick=\"tabClick\"/>\n      <goods-list :goods=\"showGoods\"/>\n    </scroll>\n    <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"/>\n  </div>\n</template>\n\n<script>\n  import NavBar from \"components/common/navbar/NavBar\";\n  import TabControl from \"components/content/tabControl/TabControl\";\n  import Scroll from \"components/common/scroll/Scroll\";\n  import GoodsList from 'components/content/goods/GoodsList'\n\n  import HomeSwiper from \"./childComps/HomeSwiper\";\n  import RecommendView from \"./childComps/RecommendView\";\n  import FeatureView from \"./childComps/FeatureView\";\n\n  import {getHomeMultidata, getHomeGoods} from \"network/home\";\n  import {itemListenerMixin, backTopMixin} from \"@/common/mixin\";\n\n  export default {\n    name: \"Home\",\n    data() {\n      return {\n        banners: [],\n        recommends: [],\n        goods: {\n          'pop': { page: 0, list: []},\n          'new': { page: 0, list: []},\n          'sell': { page: 0, list: []},\n        },\n        currentType: 'pop',\n        tabOffsetTop: 0,\n        isTabFixed: false,\n        saveY: 0,\n      }\n    },\n    mixins: [itemListenerMixin, backTopMixin],\n    activated() {\n      this.$refs.scroll.scrollTo(0, this.saveY, 0)\n      this.$refs.scroll.refresh()\n    },\n    deactivated() {\n      // 1. 保存Y的值\n      this.saveY = this.$refs.scroll.scrollY\n      // 2.取消全局事件的监听\n      this.$bus.$off('itemImageLoad', this.itemImgListener)\n\n    },\n    components: {\n      HomeSwiper,\n      RecommendView,\n      FeatureView,\n      GoodsList,\n      NavBar,\n      TabControl,\n      Scroll,\n    },\n    created() {\n      // 1. 发送多个网络请求\n     this.getHomeMultidata()\n     // 2. 请求商品数据\n      this.getHomeGoods('pop')\n      this.getHomeGoods('new')\n      this.getHomeGoods('sell')\n    },\n    computed: {\n      showGoods() {\n        return this.goods[this.currentType].list\n      }\n    },\n    mounted() {\n      // console.log(\"Home\");\n      /*      // 事件的加载完成\n            const refresh = debounce(this.$refs.scroll.refresh, 500)\n            // 对监听的事件进行保存\n            this.itemImgListener = () => { // 3. 监听item中的图片加载完成\n              refresh()\n            }\n            this.$bus.$on('itemImageLoad', this.itemImgListener)*/\n    },\n    methods: {\n      /*\n      *   事件监听相关的方法\n      * */\n      swiperImageLoad() {\n        // 3. 获取\n        // 所有的组件都有一个属性 $el :用于获取组件中的元素\n        this.tabOffsetTop = this.$refs.tabcontrol2.$el.offsetTop;\n      },\n      tabClick(index) {\n        switch (index) {\n          case 0:\n            this.currentType = 'pop'\n            break;\n          case 1:\n            this.currentType = 'new'\n            break;\n          case 2:\n            this.currentType = 'sell'\n            break;\n        }\n        this.$refs.tabcontrol1.currentIndex = index\n        this.$refs.tabcontrol2.currentIndex = index\n      },\n      loadMore() {\n        this.getHomeGoods(this.currentType)\n        this.$refs.scroll.scroll.refresh()\n      },\n      contentScroll(position) {\n        // 1. 判断BackTop显示隐藏\n        // this.isShowBackTop =  -position.y > BACK_POSITION ? true : false;\n        this.ListenerShowBackTop(position)\n        // 2. 判断是否吸顶\n        this.isTabFixed = -position.y >= this.tabOffsetTop ? true : false;\n      },\n       /*\n       *  网络请求相关的方法\n       * */\n      getHomeMultidata() {\n        getHomeMultidata().then(response => {\n          // console.log(response); // this.result = response.data\n           this.banners = response.data.banner.list   // 保存数据\n           this.recommends = response.data.recommend.list\n        })\n      },\n      getHomeGoods(type) {\n        const page = this.goods[type].page +　1\n        getHomeGoods(type, page).then(res => {\n            // let array = res.data.list const NewArray = [...res.data.list, ...array]\n             this.goods[type].list.push(...res.data.list)\n             this.goods[type].page +=　1\n             this.$refs.scroll.finishPullUp()\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #home {\n    /*padding-top: 44px;*/\n    height: 100vh;\n    position: relative;\n  }\n\n  .home-nav {\n    background-color: var(--color-tint);\n    color: #fff;\n    /**/\n    /*position: fixed;*/\n    /*left: 0;*/\n    /*right: 0;*/\n    /*top: 0;*/\n    z-index: 1;\n  }\n  /*.content {*/\n  /*  position: absolute;*/\n  /*  overflow: hidden;*/\n  /*  top: 44px;*/\n  /*  bottom: 49px;*/\n  /*  left: 0;*/\n  /*  right: 0;*/\n  /*}*/\n  .content {\n    position: absolute;\n    overflow: hidden;\n    top: 44px;\n    bottom: 49px;\n    left: 0;\n    right: 0;\n  }\n  .tab-control {\n    position: relative;\n    z-index: 9;\n  }\n  .content {\n    height: calc(100% - 44px - 49px);\n    overflow: hidden;\n    /*margin-top: 44px!important;*/\n  }\n  /*.content {*/\n  /*  height: calc(100% - 93px);*/\n  /*  overflow: hidden;*/\n  /*  margin-top: 44px!important;*/\n  /*}*/\n</style>\n"]}]}