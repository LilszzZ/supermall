{"remainingRequest":"D:\\vue项目\\supermall-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue项目\\supermall-master\\src\\views\\detail\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue项目\\supermall-master\\src\\views\\detail\\Detail.vue","mtime":1620893710000},{"path":"D:\\vue项目\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655460943176},{"path":"D:\\vue项目\\supermall-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1655460947168},{"path":"D:\\vue项目\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655460943176},{"path":"D:\\vue项目\\supermall-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1655460947237}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IFNjcm9sbCBmcm9tICJjb21wb25lbnRzL2NvbW1vbi9zY3JvbGwvU2Nyb2xsIjsKICBpbXBvcnQgR29vZHNMaXN0IGZyb20gImNvbXBvbmVudHMvY29udGVudC9nb29kcy9Hb29kc0xpc3QiOwogIC8vIGltcG9ydCBUb2FzdCBmcm9tICdjb21wb25lbnRzL2NvbW1vbi90b2FzdC9Ub2FzdCcKCiAgaW1wb3J0IERldGFpbE5hdkJhciBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsTmF2QmFyIjsKICBpbXBvcnQgRGV0YWlsU3dpcGVyIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxTd2lwZXIiOwogIGltcG9ydCBEZXRhaWxCYXNlSW5mbyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsQmFzZUluZm8iOwogIGltcG9ydCBEZXRhaWxTaG9wSW5mbyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsU2hvcEluZm8iOwogIGltcG9ydCBEZXRhaWxHb29kc0luZm8gZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbEdvb2RzSW5mbyI7CiAgaW1wb3J0IERldGFpbFBhcmFtcyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsUGFyYW1zIjsKICBpbXBvcnQgRGV0YWlsQ29tbWVudEluZm8gZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbENvbW1lbnRJbmZvIjsKICBpbXBvcnQgRGV0YWlsQm90dG9tQmFyIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxCb3R0b21CYXIiOwoKICBpbXBvcnQge2dldERldGFpbCwgR29vZHMsIFNob3AsIEdvb2RzUGFyYW0sIGdldFJlY29tbWVuZH0gZnJvbSAiQC9uZXR3b3JrL2RldGFpbCI7CiAgaW1wb3J0IHtpdGVtTGlzdGVuZXJNaXhpbiwgYmFja1RvcE1peGlufSBmcm9tICJAL2NvbW1vbi9taXhpbiI7CiAgaW1wb3J0IHtkZWJvdW5jZX0gZnJvbSAiQC9jb21tb24vdXRpbHMiOwoKICBpbXBvcnQge21hcEdldHRlcnMsIG1hcEFjdGlvbnN9IGZyb20gJ3Z1ZXgnCgogIGV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGV0YWlsIiwKICBjb21wb25lbnRzOiB7CiAgICBTY3JvbGwsCiAgICBHb29kc0xpc3QsCiAgICAvLyBUb2FzdCwKICAgIERldGFpbFN3aXBlciwKICAgIERldGFpbE5hdkJhciwKICAgIERldGFpbEJhc2VJbmZvLAogICAgRGV0YWlsU2hvcEluZm8sCiAgICBEZXRhaWxHb29kc0luZm8sCiAgICBEZXRhaWxQYXJhbXMsCiAgICBEZXRhaWxDb21tZW50SW5mbywKICAgIERldGFpbEJvdHRvbUJhciwKICAgIGdldERldGFpbAogIH0sCiAgbWl4aW5zOiBbaXRlbUxpc3RlbmVyTWl4aW4sIGJhY2tUb3BNaXhpbl0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlpZDogbnVsbCwKICAgICAgdG9wSW1hZ2VzOiBbXSwKICAgICAgZ29vZHM6IHt9LAogICAgICBzaG9wOiB7fSwKICAgICAgZGV0YWlsSW5mbzoge30sCiAgICAgIHBhcmFtc0luZm86IHt9LAogICAgICBjb21tZW50SW5mbzoge30sCiAgICAgIHJlY29tbWVuZDogW10sCiAgICAgIHRoZW1lVG9wWXM6IFtdLAogICAgICBnZXRUaGVtZVRvcFk6IG51bGwsCiAgICAgIGN1cnJlbnRJbmRleDogMCwKICAgICAgLy8gbWVzc2FnZTogJycsCiAgICAgIC8vIHNob3c6IGZhbHNlCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gMS4g5L+d5a2Y5Lyg5YWl55qEaWlkCiAgICB0aGlzLmlpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5paWQKICAgIC8vIDIuIOagueaNrmlpZOivt+axguivpuaDheaVsOaNrgogICAgZ2V0RGV0YWlsKHRoaXMuaWlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgLy8gMS4g6I635Y+W6aG26YOo6L2u5pKt5pWw5o2uCiAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5yZXN1bHQKICAgICAgdGhpcy50b3BJbWFnZXMgPSBkYXRhLml0ZW1JbmZvLnRvcEltYWdlcwogICAgICAvLyAyLiDojrflj5bllYblk4Hkv6Hmga8KICAgICAgdGhpcy5nb29kcyA9IG5ldyBHb29kcyhkYXRhLml0ZW1JbmZvLCBkYXRhLmNvbHVtbnMsIGRhdGEuc2hvcEluZm8uc2VydmljZXMpCiAgICAgIC8vIDMuIOiOt+WPluW6l+mTuuS/oeaBrwogICAgICB0aGlzLnNob3AgPSBuZXcgU2hvcChkYXRhLnNob3BJbmZvKQogICAgICAvLyA0LiDojrflj5bllYblk4HnmoTor6bmg4XmlbDmja4KICAgICAgdGhpcy5kZXRhaWxJbmZvID0gZGF0YS5kZXRhaWxJbmZvCiAgICAgIC8vIDUuIOiOt+WPluWPguaVsOS/oeaBrwogICAgICB0aGlzLnBhcmFtc0luZm8gPSBuZXcgR29vZHNQYXJhbShkYXRhLml0ZW1QYXJhbXMuaW5mbywgZGF0YS5pdGVtUGFyYW1zLnJ1bGUpCiAgICAgIC8vIDYu6I635Y+W6K+E6K665L+h5oGvCiAgICAgIGlmKGRhdGEucmF0ZS5jUmF0ZSAhPT0gMCkgewogICAgICAgIHRoaXMuY29tbWVudEluZm8gPSBkYXRhLnJhdGUubGlzdFswXQogICAgICB9CiAgICAgIC8qCiAgICAgIERPTeayoeaciea4suafkwogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCgwKQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCgtdGhpcy4kcmVmcy5wYXJhbXMuJGVsLm9mZnNldFRvcCkKICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2goLXRoaXMuJHJlZnMuY29tbWVudC4kZWwub2Zmc2V0VG9wKQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCgtdGhpcy4kcmVmcy5yZWNvbW1lbmQuJGVsLm9mZnNldFRvcCkKICAgICAgY29uc29sZS5sb2codGhpcy50aGVtZVRvcFlzKTsqLwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIC8qICDlm77niYfmsqHmnInliqDovb3lrozmiJAKICAgICAgICAgIHRoaXMudGhlbWVUb3BZcyA9IFtdCiAgICAgICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCgwKQogICAgICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2goLXRoaXMuJHJlZnMucGFyYW1zLiRlbC5vZmZzZXRUb3ApCiAgICAgICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCgtdGhpcy4kcmVmcy5jb21tZW50LiRlbC5vZmZzZXRUb3ApCiAgICAgICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCgtdGhpcy4kcmVmcy5yZWNvbW1lbmQuJGVsLm9mZnNldFRvcCkKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudGhlbWVUb3BZcyk7Ki8KICAgICAgfSkKCgogICAgfSkKICAgIGdldFJlY29tbWVuZCgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMucmVjb21tZW5kID0gcmVzcG9uc2UuZGF0YS5saXN0CiAgICAgIH0pCiAgICAvLyA0LiDnu5lnZXRUaGVtZVRvcFnotYvlgLwg57uZ5Ye95pWw6LWL5YC86L+b6KGM6Ziy5oqWCiAgICAgIHRoaXMuZ2V0VGhlbWVUb3BZID0gZGVib3VuY2UoKCkgPT4gewogICAgICAgIHRoaXMudGhlbWVUb3BZcyA9IFtdCiAgICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2goMCkKICAgICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLnBhcmFtcy4kZWwub2Zmc2V0VG9wKQogICAgICAgIHRoaXMudGhlbWVUb3BZcy5wdXNoKHRoaXMuJHJlZnMuY29tbWVudC4kZWwub2Zmc2V0VG9wKQogICAgICAgIHRoaXMudGhlbWVUb3BZcy5wdXNoKHRoaXMuJHJlZnMucmVjb21tZW5kLiRlbC5vZmZzZXRUb3ApCiAgICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2goTnVtYmVyLk1BWF9WQUxVRSkKICAgICAgfSwxMDApCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnYWRkQ2FydCddKSwKICAgIGltYWdlTG9hZCgpIHsKICAgICAgLy8gdGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCgpCiAgICAgIHRoaXMucmVmcmVzaCgpCiAgICAgIHRoaXMuZ2V0VGhlbWVUb3BZKCkKICAgIH0sCiAgICB0aXRsZUNsaWNrKGluZGV4KSB7CiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnNjcm9sbFRvKDAsIC10aGlzLnRoZW1lVG9wWXNbaW5kZXhdLCAyMDApCiAgICB9LAogICAgY29udGVudFNjcm9sbChwb3NpdGlvbikgewogICAgICBjb25zdCBwb3NpdGlvblkgPSAtcG9zaXRpb24ueTsKICAgICAgbGV0IGxlbmd0aCA9IHRoaXMudGhlbWVUb3BZcy5sZW5ndGgKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGgtMTsgaSsrKSB7CiAgICAgICAgaWYodGhpcy5jdXJyZW50SW5kZXggIT09IGkgJiYgKHBvc2l0aW9uWSA+PSB0aGlzLnRoZW1lVG9wWXNbaV0gJiYgcG9zaXRpb25ZIDwgdGhpcy50aGVtZVRvcFlzW2krMV0pKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGk7CiAgICAgICAgICB0aGlzLiRyZWZzLkRldGFpbE5hdi5jdXJyZW50SW5kZXggPSB0aGlzLmN1cnJlbnRJbmRleDsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudEluZGV4KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5MaXN0ZW5lclNob3dCYWNrVG9wKHBvc2l0aW9uKQoKICAgICAgICAvLyB0aGlzLmlzU2hvd0JhY2tUb3AgPSAgLXBvc2l0aW9uLnkgPiBCQUNLX1BPU0lUSU9OID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgLyogaWYoKHRoaXMuY3VycmVudEluZGV4ICE9PSBpKSAmJiAoCiAgICAgICAgICAoaSA8IGxlbmd0aCAtIDEgJibjgIBwb3NpdGlvblkgPj0gdGhpcy50aGVtZVRvcFlzW2ldICYmIHBvc2l0aW9uWSA8IHRoaXMudGhlbWVUb3BZc1tpKzFdKQogICAgICAgICAgICB8fCAoaSA9PT0gbGVuZ3RoIC0gMSAmJiBwb3NpdGlvblkgPj0gdGhpcy50aGVtZVRvcFlzW2ldKSkpIHsKICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gaTsKICAgICAgICAgIGNvbnNvbGUubG9nKGkpOwogICAgICAgICAgLy8gdGhpcy4kcmVmcy5uYXZiYXIuY3VycmVudEluZGV4ID0gdGhpcy5jdXJyZW50SW5kZXgKICAgICAgICB9Ki8KICAgICAgfQogICAgfSwKICAgIGFkZFRvQ2FydCgpIHsKICAgICAgLy8gMS4g6I635Y+W6ZyA6KaB55qE5bGV56S65Y+C5pWw5pWw5o2uCiAgICAgIGNvbnN0IHByb2R1Y3QgPSB7fTsKICAgICAgcHJvZHVjdC5pbWFnZSA9IHRoaXMudG9wSW1hZ2VzWzBdCiAgICAgIHByb2R1Y3QudGl0bGUgPSB0aGlzLmdvb2RzLnRpdGxlCiAgICAgIHByb2R1Y3QuZGVzYyA9IHRoaXMuZ29vZHMuZGVzYwogICAgICBwcm9kdWN0LnByaWNlID0gdGhpcy5nb29kcy5uZXdQcmljZQogICAgICBwcm9kdWN0LmlpZCA9IHRoaXMuaWlkCiAgICAgIHByb2R1Y3QuY2hlY2tlZCA9IGZhbHNlCgogICAgICAvLyDlsIbllYblk4Hmt7vliqDliLDotK3nianovaYKICAgICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCJhZGRDYXJ0IiwgcHJvZHVjdCkKICAgICAgLy8gdGhpcy4kc3RvcmUuZGlzcGF0Y2goImFkZENhcnQiLCBwcm9kdWN0KS50aGVuKHJlcyA9PiB7CiAgICAgIC8vICAgY29uc29sZS5sb2cocmVzKQogICAgICAvLyB9KQogICAgICB0aGlzLmFkZENhcnQocHJvZHVjdCkudGhlbihyZXMgPT4gewogICAgICAgIC8vIHRoaXMuc2hvdyA9IHRydWUKICAgICAgICAvLyB0aGlzLm1lc3NhZ2UgPSByZXMKICAgICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAvLyAgdGhpcy5zaG93ID0gZmFsc2UKICAgICAgICAvLyB0aGlzLm1lc3NhZ2UgPSAnJwogICAgICAgIC8vIH0sIDE1MDApCiAgICAgICAgY29uc29sZS5sb2codGhpcy4kdG9hc3QpOwogICAgICAgIHRoaXMuJHRvYXN0LnNob3cocmVzKQogICAgICB9KQogICAgICAvLyAg5re75Yqg6LSt54mp6L2m5oiQ5YqfCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewoKICAgIC8vIGNvbnNvbGUubG9nKCJEZXRhaWwiKTsKICAgIC8qICBjb25zdCByZWZyZXNoID0gZGVib3VuY2UodGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCwgNTAwKQogICAgICB0aGlzLml0ZW1JbWdMaXN0ZW5lciA9ICgpID0+IHsgLy8gMy4g55uR5ZCsaXRlbeS4reeahOWbvueJh+WKoOi9veWujOaIkAogICAgICAgIHJlZnJlc2goKQogICAgICB9CiAgICAgIHRoaXMuJGJ1cy4kb24oJ2l0ZW1JbWFnZUxvYWQnLCB0aGlzLml0ZW1JbWdMaXN0ZW5lcikqLwogIH0sCiAgZGVzdHJveWVkKCkgewogICAgLy8gMi7lj5bmtojlhajlsYDkuovku7bnmoTnm5HlkKwKICAgIHRoaXMuJGJ1cy4kb2ZmKCdpdGVtSW1hZ2VMb2FkJywgdGhpcy5pdGVtSW1nTGlzdGVuZXIpCiAgfQp9Cg=="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\n    <div class=\"detail\">\n      <detail-nav-bar @titleClick=\"titleClick\" ref=\"DetailNav\"/>\n      <scroll class=\"detail-scroll\" ref=\"scroll\" @scroll=\"contentScroll\" :probe-type=\"3\">\n<!--        属性： topImage 传入值： top-image-->\n        <detail-swiper :top-images=\"topImages\" ref=\"detailImage\"/>\n        <detail-base-info :goods=\"goods\"/>\n        <detail-shop-info :shop=\"shop\"/>\n        <detail-goods-info :detail-info=\"detailInfo\" @imageLoad=\"imageLoad\"/>\n        <detail-params :param-info=\"paramsInfo\" ref=\"params\"/>\n        <detail-comment-info :comment-info=\"commentInfo\" ref=\"comment\"/>\n        <goods-list :goods=\"recommend\" ref=\"recommend\"/>\n\n      </scroll>\n      <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"/>\n      <detail-bottom-bar @addCart=\"addToCart\"/>\n      <!-- <toast :message=\"message\" :show=\"show\"/> -->\n    </div>\n</template>\n\n\n<script>\n  import Scroll from \"components/common/scroll/Scroll\";\n  import GoodsList from \"components/content/goods/GoodsList\";\n  // import Toast from 'components/common/toast/Toast'\n\n  import DetailNavBar from \"./childComps/DetailNavBar\";\n  import DetailSwiper from \"./childComps/DetailSwiper\";\n  import DetailBaseInfo from \"./childComps/DetailBaseInfo\";\n  import DetailShopInfo from \"./childComps/DetailShopInfo\";\n  import DetailGoodsInfo from \"./childComps/DetailGoodsInfo\";\n  import DetailParams from \"./childComps/DetailParams\";\n  import DetailCommentInfo from \"./childComps/DetailCommentInfo\";\n  import DetailBottomBar from \"./childComps/DetailBottomBar\";\n\n  import {getDetail, Goods, Shop, GoodsParam, getRecommend} from \"@/network/detail\";\n  import {itemListenerMixin, backTopMixin} from \"@/common/mixin\";\n  import {debounce} from \"@/common/utils\";\n\n  import {mapGetters, mapActions} from 'vuex'\n\n  export default {\n  name: \"Detail\",\n  components: {\n    Scroll,\n    GoodsList,\n    // Toast,\n    DetailSwiper,\n    DetailNavBar,\n    DetailBaseInfo,\n    DetailShopInfo,\n    DetailGoodsInfo,\n    DetailParams,\n    DetailCommentInfo,\n    DetailBottomBar,\n    getDetail\n  },\n  mixins: [itemListenerMixin, backTopMixin],\n  data() {\n    return {\n      iid: null,\n      topImages: [],\n      goods: {},\n      shop: {},\n      detailInfo: {},\n      paramsInfo: {},\n      commentInfo: {},\n      recommend: [],\n      themeTopYs: [],\n      getThemeTopY: null,\n      currentIndex: 0,\n      // message: '',\n      // show: false\n    }\n  },\n  created() {\n    // 1. 保存传入的iid\n    this.iid = this.$route.params.iid\n    // 2. 根据iid请求详情数据\n    getDetail(this.iid).then(response => {\n      // 1. 获取顶部轮播数据\n      const data = response.result\n      this.topImages = data.itemInfo.topImages\n      // 2. 获取商品信息\n      this.goods = new Goods(data.itemInfo, data.columns, data.shopInfo.services)\n      // 3. 获取店铺信息\n      this.shop = new Shop(data.shopInfo)\n      // 4. 获取商品的详情数据\n      this.detailInfo = data.detailInfo\n      // 5. 获取参数信息\n      this.paramsInfo = new GoodsParam(data.itemParams.info, data.itemParams.rule)\n      // 6.获取评论信息\n      if(data.rate.cRate !== 0) {\n        this.commentInfo = data.rate.list[0]\n      }\n      /*\n      DOM没有渲染\n      this.themeTopYs.push(0)\n      this.themeTopYs.push(-this.$refs.params.$el.offsetTop)\n      this.themeTopYs.push(-this.$refs.comment.$el.offsetTop)\n      this.themeTopYs.push(-this.$refs.recommend.$el.offsetTop)\n      console.log(this.themeTopYs);*/\n      this.$nextTick(() => {\n      /*  图片没有加载完成\n          this.themeTopYs = []\n          this.themeTopYs.push(0)\n          this.themeTopYs.push(-this.$refs.params.$el.offsetTop)\n          this.themeTopYs.push(-this.$refs.comment.$el.offsetTop)\n          this.themeTopYs.push(-this.$refs.recommend.$el.offsetTop)\n          console.log(this.themeTopYs);*/\n      })\n\n\n    })\n    getRecommend().then(response => {\n        this.recommend = response.data.list\n      })\n    // 4. 给getThemeTopY赋值 给函数赋值进行防抖\n      this.getThemeTopY = debounce(() => {\n        this.themeTopYs = []\n        this.themeTopYs.push(0)\n        this.themeTopYs.push(this.$refs.params.$el.offsetTop)\n        this.themeTopYs.push(this.$refs.comment.$el.offsetTop)\n        this.themeTopYs.push(this.$refs.recommend.$el.offsetTop)\n        this.themeTopYs.push(Number.MAX_VALUE)\n      },100)\n  },\n  methods: {\n    ...mapActions(['addCart']),\n    imageLoad() {\n      // this.$refs.scroll.refresh()\n      this.refresh()\n      this.getThemeTopY()\n    },\n    titleClick(index) {\n      this.$refs.scroll.scrollTo(0, -this.themeTopYs[index], 200)\n    },\n    contentScroll(position) {\n      const positionY = -position.y;\n      let length = this.themeTopYs.length\n      for (let i = 0; i < length-1; i++) {\n        if(this.currentIndex !== i && (positionY >= this.themeTopYs[i] && positionY < this.themeTopYs[i+1])) {\n          this.currentIndex = i;\n          this.$refs.DetailNav.currentIndex = this.currentIndex;\n          // console.log(this.currentIndex);\n        }\n        this.ListenerShowBackTop(position)\n\n        // this.isShowBackTop =  -position.y > BACK_POSITION ? true : false;\n       /* if((this.currentIndex !== i) && (\n          (i < length - 1 &&　positionY >= this.themeTopYs[i] && positionY < this.themeTopYs[i+1])\n            || (i === length - 1 && positionY >= this.themeTopYs[i]))) {\n          this.currentIndex = i;\n          console.log(i);\n          // this.$refs.navbar.currentIndex = this.currentIndex\n        }*/\n      }\n    },\n    addToCart() {\n      // 1. 获取需要的展示参数数据\n      const product = {};\n      product.image = this.topImages[0]\n      product.title = this.goods.title\n      product.desc = this.goods.desc\n      product.price = this.goods.newPrice\n      product.iid = this.iid\n      product.checked = false\n\n      // 将商品添加到购物车\n      // this.$store.commit(\"addCart\", product)\n      // this.$store.dispatch(\"addCart\", product).then(res => {\n      //   console.log(res)\n      // })\n      this.addCart(product).then(res => {\n        // this.show = true\n        // this.message = res\n        // setTimeout(() => {\n        //  this.show = false\n        // this.message = ''\n        // }, 1500)\n        console.log(this.$toast);\n        this.$toast.show(res)\n      })\n      //  添加购物车成功\n    }\n  },\n  mounted() {\n\n    // console.log(\"Detail\");\n    /*  const refresh = debounce(this.$refs.scroll.refresh, 500)\n      this.itemImgListener = () => { // 3. 监听item中的图片加载完成\n        refresh()\n      }\n      this.$bus.$on('itemImageLoad', this.itemImgListener)*/\n  },\n  destroyed() {\n    // 2.取消全局事件的监听\n    this.$bus.$off('itemImageLoad', this.itemImgListener)\n  }\n}\n</script>\n\n<style scoped>\n  .detail {\n    height: 100vh;\n    position: relative;\n    z-index: 1;\n    background-color: #ffffff;\n  }\n  .detail-scroll {\n    height: calc(100% - 44px - 2.09rem);\n    overflow: hidden;\n  }\n</style>\n"]}]}