{"remainingRequest":"D:\\vue项目\\supermall-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue项目\\supermall-master\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue项目\\supermall-master\\src\\views\\home\\Home.vue","mtime":1620893710000},{"path":"D:\\vue项目\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655460943176},{"path":"D:\\vue项目\\supermall-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1655460947168},{"path":"D:\\vue项目\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655460943176},{"path":"D:\\vue项目\\supermall-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1655460947237}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZCYXIgZnJvbSAiY29tcG9uZW50cy9jb21tb24vbmF2YmFyL05hdkJhciI7CmltcG9ydCBUYWJDb250cm9sIGZyb20gImNvbXBvbmVudHMvY29udGVudC90YWJDb250cm9sL1RhYkNvbnRyb2wiOwppbXBvcnQgU2Nyb2xsIGZyb20gImNvbXBvbmVudHMvY29tbW9uL3Njcm9sbC9TY3JvbGwiOwppbXBvcnQgR29vZHNMaXN0IGZyb20gJ2NvbXBvbmVudHMvY29udGVudC9nb29kcy9Hb29kc0xpc3QnCgppbXBvcnQgSG9tZVN3aXBlciBmcm9tICIuL2NoaWxkQ29tcHMvSG9tZVN3aXBlciI7CmltcG9ydCBSZWNvbW1lbmRWaWV3IGZyb20gIi4vY2hpbGRDb21wcy9SZWNvbW1lbmRWaWV3IjsKaW1wb3J0IEZlYXR1cmVWaWV3IGZyb20gIi4vY2hpbGRDb21wcy9GZWF0dXJlVmlldyI7CgppbXBvcnQge2dldEhvbWVNdWx0aWRhdGEsIGdldEhvbWVHb29kc30gZnJvbSAibmV0d29yay9ob21lIjsKaW1wb3J0IHtpdGVtTGlzdGVuZXJNaXhpbiwgYmFja1RvcE1peGlufSBmcm9tICJAL2NvbW1vbi9taXhpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiYW5uZXJzOiBbXSwKICAgICAgcmVjb21tZW5kczogW10sCiAgICAgIGdvb2RzOiB7CiAgICAgICAgJ3BvcCc6IHsgcGFnZTogMCwgbGlzdDogW119LAogICAgICAgICduZXcnOiB7IHBhZ2U6IDAsIGxpc3Q6IFtdfSwKICAgICAgICAnc2VsbCc6IHsgcGFnZTogMCwgbGlzdDogW119LAogICAgICB9LAogICAgICBjdXJyZW50VHlwZTogJ3BvcCcsCiAgICAgIHRhYk9mZnNldFRvcDogMCwKICAgICAgaXNUYWJGaXhlZDogZmFsc2UsCiAgICAgIHNhdmVZOiAwLAogICAgfQogIH0sCiAgbWl4aW5zOiBbaXRlbUxpc3RlbmVyTWl4aW4sIGJhY2tUb3BNaXhpbl0sCiAgYWN0aXZhdGVkKCkgewogICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCwgdGhpcy5zYXZlWSwgMCkKICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnJlZnJlc2goKQogIH0sCiAgZGVhY3RpdmF0ZWQoKSB7CiAgICAvLyAxLiDkv53lrZhZ55qE5YC8CiAgICB0aGlzLnNhdmVZID0gdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsWQogICAgLy8gMi7lj5bmtojlhajlsYDkuovku7bnmoTnm5HlkKwKICAgIHRoaXMuJGJ1cy4kb2ZmKCdpdGVtSW1hZ2VMb2FkJywgdGhpcy5pdGVtSW1nTGlzdGVuZXIpCgogIH0sCiAgY29tcG9uZW50czogewogICAgSG9tZVN3aXBlciwKICAgIFJlY29tbWVuZFZpZXcsCiAgICBGZWF0dXJlVmlldywKICAgIEdvb2RzTGlzdCwKICAgIE5hdkJhciwKICAgIFRhYkNvbnRyb2wsCiAgICBTY3JvbGwsCiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gMS4g5Y+R6YCB5aSa5Liq572R57uc6K+35rGCCiAgIHRoaXMuZ2V0SG9tZU11bHRpZGF0YSgpCiAgIC8vIDIuIOivt+axguWVhuWTgeaVsOaNrgogICAgdGhpcy5nZXRIb21lR29vZHMoJ3BvcCcpCiAgICB0aGlzLmdldEhvbWVHb29kcygnbmV3JykKICAgIHRoaXMuZ2V0SG9tZUdvb2RzKCdzZWxsJykKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzaG93R29vZHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmdvb2RzW3RoaXMuY3VycmVudFR5cGVdLmxpc3QKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyBjb25zb2xlLmxvZygiSG9tZSIpOwogICAgLyogICAgICAvLyDkuovku7bnmoTliqDovb3lrozmiJAKICAgICAgICAgIGNvbnN0IHJlZnJlc2ggPSBkZWJvdW5jZSh0aGlzLiRyZWZzLnNjcm9sbC5yZWZyZXNoLCA1MDApCiAgICAgICAgICAvLyDlr7nnm5HlkKznmoTkuovku7bov5vooYzkv53lrZgKICAgICAgICAgIHRoaXMuaXRlbUltZ0xpc3RlbmVyID0gKCkgPT4geyAvLyAzLiDnm5HlkKxpdGVt5Lit55qE5Zu+54mH5Yqg6L295a6M5oiQCiAgICAgICAgICAgIHJlZnJlc2goKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kYnVzLiRvbignaXRlbUltYWdlTG9hZCcsIHRoaXMuaXRlbUltZ0xpc3RlbmVyKSovCiAgfSwKICBtZXRob2RzOiB7CiAgICAvKgogICAgKiAgIOS6i+S7tuebkeWQrOebuOWFs+eahOaWueazlQogICAgKiAqLwogICAgc3dpcGVySW1hZ2VMb2FkKCkgewogICAgICAvLyAzLiDojrflj5YKICAgICAgLy8g5omA5pyJ55qE57uE5Lu26YO95pyJ5LiA5Liq5bGe5oCnICRlbCA655So5LqO6I635Y+W57uE5Lu25Lit55qE5YWD57SgCiAgICAgIHRoaXMudGFiT2Zmc2V0VG9wID0gdGhpcy4kcmVmcy50YWJjb250cm9sMi4kZWwub2Zmc2V0VG9wOwogICAgfSwKICAgIHRhYkNsaWNrKGluZGV4KSB7CiAgICAgIHN3aXRjaCAoaW5kZXgpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICB0aGlzLmN1cnJlbnRUeXBlID0gJ3BvcCcKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMToKICAgICAgICAgIHRoaXMuY3VycmVudFR5cGUgPSAnbmV3JwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdGhpcy5jdXJyZW50VHlwZSA9ICdzZWxsJwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgdGhpcy4kcmVmcy50YWJjb250cm9sMS5jdXJyZW50SW5kZXggPSBpbmRleAogICAgICB0aGlzLiRyZWZzLnRhYmNvbnRyb2wyLmN1cnJlbnRJbmRleCA9IGluZGV4CiAgICB9LAogICAgbG9hZE1vcmUoKSB7CiAgICAgIHRoaXMuZ2V0SG9tZUdvb2RzKHRoaXMuY3VycmVudFR5cGUpCiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnNjcm9sbC5yZWZyZXNoKCkKICAgIH0sCiAgICBjb250ZW50U2Nyb2xsKHBvc2l0aW9uKSB7CiAgICAgIC8vIDEuIOWIpOaWrUJhY2tUb3DmmL7npLrpmpDol48KICAgICAgLy8gdGhpcy5pc1Nob3dCYWNrVG9wID0gIC1wb3NpdGlvbi55ID4gQkFDS19QT1NJVElPTiA/IHRydWUgOiBmYWxzZTsKICAgICAgdGhpcy5MaXN0ZW5lclNob3dCYWNrVG9wKHBvc2l0aW9uKQogICAgICAvLyAyLiDliKTmlq3mmK/lkKblkLjpobYKICAgICAgdGhpcy5pc1RhYkZpeGVkID0gLXBvc2l0aW9uLnkgPj0gdGhpcy50YWJPZmZzZXRUb3AgPyB0cnVlIDogZmFsc2U7CiAgICB9LAogICAgIC8qCiAgICAgKiAg572R57uc6K+35rGC55u45YWz55qE5pa55rOVCiAgICAgKiAqLwogICAgZ2V0SG9tZU11bHRpZGF0YSgpIHsKICAgICAgZ2V0SG9tZU11bHRpZGF0YSgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsgLy8gdGhpcy5yZXN1bHQgPSByZXNwb25zZS5kYXRhCiAgICAgICAgIHRoaXMuYmFubmVycyA9IHJlc3BvbnNlLmRhdGEuYmFubmVyLmxpc3QgICAvLyDkv53lrZjmlbDmja4KICAgICAgICAgdGhpcy5yZWNvbW1lbmRzID0gcmVzcG9uc2UuZGF0YS5yZWNvbW1lbmQubGlzdAogICAgICB9KQogICAgfSwKICAgIGdldEhvbWVHb29kcyh0eXBlKSB7CiAgICAgIGNvbnN0IHBhZ2UgPSB0aGlzLmdvb2RzW3R5cGVdLnBhZ2UgK+OAgDEKICAgICAgZ2V0SG9tZUdvb2RzKHR5cGUsIHBhZ2UpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIC8vIGxldCBhcnJheSA9IHJlcy5kYXRhLmxpc3QgY29uc3QgTmV3QXJyYXkgPSBbLi4ucmVzLmRhdGEubGlzdCwgLi4uYXJyYXldCiAgICAgICAgICAgdGhpcy5nb29kc1t0eXBlXS5saXN0LnB1c2goLi4ucmVzLmRhdGEubGlzdCkKICAgICAgICAgICB0aGlzLmdvb2RzW3R5cGVdLnBhZ2UgKz3jgIAxCiAgICAgICAgICAgdGhpcy4kcmVmcy5zY3JvbGwuZmluaXNoUHVsbFVwKCkKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div id=\"home\">\n    <nav-bar class=\"home-nav\"><div slot=\"center\">购物街</div></nav-bar>\n    <tab-control :titles=\"['流行', '新款', '精选']\"\n                 ref=\"tabcontrol1\"\n                 @tabClick=\"tabClick\"\n                  class=\"tab-control\"\n                  v-show=\"isTabFixed\"/>\n    <scroll class=\"content\"\n            ref=\"scroll\"\n            :probe-type=\"2\"\n            :pull-up-load=\"true\"\n            @scroll=\"contentScroll\"\n            @pullingUp=\"loadMore\">\n      <home-swiper :banners=\"banners\" @swiperImageLoad=\"swiperImageLoad\"/>\n      <recommend-view :recommends=\"recommends\"/>\n      <feature-view/>\n      <tab-control :titles=\"['流行', '新款', '精选']\"\n                   ref=\"tabcontrol2\"\n                   @tabClick=\"tabClick\"/>\n      <goods-list :goods=\"showGoods\"/>\n    </scroll>\n    <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"/>\n  </div>\n</template>\n\n<script>\n  import NavBar from \"components/common/navbar/NavBar\";\n  import TabControl from \"components/content/tabControl/TabControl\";\n  import Scroll from \"components/common/scroll/Scroll\";\n  import GoodsList from 'components/content/goods/GoodsList'\n\n  import HomeSwiper from \"./childComps/HomeSwiper\";\n  import RecommendView from \"./childComps/RecommendView\";\n  import FeatureView from \"./childComps/FeatureView\";\n\n  import {getHomeMultidata, getHomeGoods} from \"network/home\";\n  import {itemListenerMixin, backTopMixin} from \"@/common/mixin\";\n\n  export default {\n    name: \"Home\",\n    data() {\n      return {\n        banners: [],\n        recommends: [],\n        goods: {\n          'pop': { page: 0, list: []},\n          'new': { page: 0, list: []},\n          'sell': { page: 0, list: []},\n        },\n        currentType: 'pop',\n        tabOffsetTop: 0,\n        isTabFixed: false,\n        saveY: 0,\n      }\n    },\n    mixins: [itemListenerMixin, backTopMixin],\n    activated() {\n      this.$refs.scroll.scrollTo(0, this.saveY, 0)\n      this.$refs.scroll.refresh()\n    },\n    deactivated() {\n      // 1. 保存Y的值\n      this.saveY = this.$refs.scroll.scrollY\n      // 2.取消全局事件的监听\n      this.$bus.$off('itemImageLoad', this.itemImgListener)\n\n    },\n    components: {\n      HomeSwiper,\n      RecommendView,\n      FeatureView,\n      GoodsList,\n      NavBar,\n      TabControl,\n      Scroll,\n    },\n    created() {\n      // 1. 发送多个网络请求\n     this.getHomeMultidata()\n     // 2. 请求商品数据\n      this.getHomeGoods('pop')\n      this.getHomeGoods('new')\n      this.getHomeGoods('sell')\n    },\n    computed: {\n      showGoods() {\n        return this.goods[this.currentType].list\n      }\n    },\n    mounted() {\n      // console.log(\"Home\");\n      /*      // 事件的加载完成\n            const refresh = debounce(this.$refs.scroll.refresh, 500)\n            // 对监听的事件进行保存\n            this.itemImgListener = () => { // 3. 监听item中的图片加载完成\n              refresh()\n            }\n            this.$bus.$on('itemImageLoad', this.itemImgListener)*/\n    },\n    methods: {\n      /*\n      *   事件监听相关的方法\n      * */\n      swiperImageLoad() {\n        // 3. 获取\n        // 所有的组件都有一个属性 $el :用于获取组件中的元素\n        this.tabOffsetTop = this.$refs.tabcontrol2.$el.offsetTop;\n      },\n      tabClick(index) {\n        switch (index) {\n          case 0:\n            this.currentType = 'pop'\n            break;\n          case 1:\n            this.currentType = 'new'\n            break;\n          case 2:\n            this.currentType = 'sell'\n            break;\n        }\n        this.$refs.tabcontrol1.currentIndex = index\n        this.$refs.tabcontrol2.currentIndex = index\n      },\n      loadMore() {\n        this.getHomeGoods(this.currentType)\n        this.$refs.scroll.scroll.refresh()\n      },\n      contentScroll(position) {\n        // 1. 判断BackTop显示隐藏\n        // this.isShowBackTop =  -position.y > BACK_POSITION ? true : false;\n        this.ListenerShowBackTop(position)\n        // 2. 判断是否吸顶\n        this.isTabFixed = -position.y >= this.tabOffsetTop ? true : false;\n      },\n       /*\n       *  网络请求相关的方法\n       * */\n      getHomeMultidata() {\n        getHomeMultidata().then(response => {\n          // console.log(response); // this.result = response.data\n           this.banners = response.data.banner.list   // 保存数据\n           this.recommends = response.data.recommend.list\n        })\n      },\n      getHomeGoods(type) {\n        const page = this.goods[type].page +　1\n        getHomeGoods(type, page).then(res => {\n            // let array = res.data.list const NewArray = [...res.data.list, ...array]\n             this.goods[type].list.push(...res.data.list)\n             this.goods[type].page +=　1\n             this.$refs.scroll.finishPullUp()\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #home {\n    /*padding-top: 44px;*/\n    height: 100vh;\n    position: relative;\n  }\n\n  .home-nav {\n    background-color: var(--color-tint);\n    color: #fff;\n    /**/\n    /*position: fixed;*/\n    /*left: 0;*/\n    /*right: 0;*/\n    /*top: 0;*/\n    z-index: 1;\n  }\n  /*.content {*/\n  /*  position: absolute;*/\n  /*  overflow: hidden;*/\n  /*  top: 44px;*/\n  /*  bottom: 49px;*/\n  /*  left: 0;*/\n  /*  right: 0;*/\n  /*}*/\n  .content {\n    position: absolute;\n    overflow: hidden;\n    top: 44px;\n    bottom: 49px;\n    left: 0;\n    right: 0;\n  }\n  .tab-control {\n    position: relative;\n    z-index: 9;\n  }\n  .content {\n    height: calc(100% - 44px - 49px);\n    overflow: hidden;\n    /*margin-top: 44px!important;*/\n  }\n  /*.content {*/\n  /*  height: calc(100% - 93px);*/\n  /*  overflow: hidden;*/\n  /*  margin-top: 44px!important;*/\n  /*}*/\n</style>\n"]}]}